# 关键决策记录

## 2025-03-18
### 1. 项目架构决策
- 决策：采用模块化设计
- 原因：便于维护、测试和扩展
- 具体实现：
  - 数据获取模块
  - 数据存储模块
  - 因子生成模块
  - 策略模块
  - 回测模块
  - 交易执行模块
  - 监控模块

### 2. 数据存储方案
- 决策：使用CSV文件存储
- 原因：
  - 开发初期数据量可控
  - 便于调试和验证
  - 实现简单快速
- 迁移计划：后期根据数据量增长情况考虑迁移到数据库

### 3. 交易框架选择
- 决策：选择vnpy
- 原因：
  - 对加密货币支持完善
  - 持续维护更新
  - 功能全面
  - 实盘交易成熟
  - 中文社区支持好

### 4. 因子开发方案
- 决策：采用混合开发方案
- 具体方案：
  - vnpy负责：
    - 数据获取
    - 实盘交易
    - 风控管理
    - 策略执行
  - 自建模块负责：
    - 因子计算
    - 因子评价
    - 因子组合
    - 多因子模型
- 原因：
  - 充分利用vnpy的交易功能
  - 保持因子研究的灵活性
  - 便于维护和扩展
  - 可以引入专业因子库

### 5. 开发优先级
1. 数据获取和存储
2. 因子研究框架
3. 回测系统
4. 实盘交易系统
5. 监控系统

### 7. 数据获取完善方案
- 决策：实现全时间周期数据获取
- 具体方案：
  - 支持所有标准时间周期
  - 采用分段下载策略
  - 实现按月存储机制
- 原因：
  - 便于后续因子研究使用不同周期数据
  - 避免单次请求数据量过大
  - 便于数据管理和更新

### 8. 数据存储结构决策
- 决策：按时间周期和月份分文件存储
- 具体方案：
  - 目录结构：data/kline/
  - 文件命名：{symbol}_{interval}_{YYYYMM}.csv
  - 数据格式：timestamp,open,high,low,close,volume
- 原因：
  - 便于按需读取特定时间段数据
  - 避免单文件过大
  - 支持并行处理
  - 便于数据更新和维护

### 8. 符号回归因子挖掘方案（17:45更新）
- 决策：实现自动因子发现功能
- 具体方案：
  - 使用遗传算法进行符号回归
  - 支持多种数学运算符和统计函数
  - 完整的因子评估体系
- 原因：
  - 无需人工预设技术指标
  - 可以发现非线性关系
  - 评估体系全面

## 待定重要决策
1. 数据完整性检查方案
2. 实时数据更新策略
3. 因子研究框架设计
4. 回测系统架构
1. 具体因子评价指标体系
2. 多因子模型选择方法
3. 实盘交易风控方案
4. 数据更新策略（实时/定时）